<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chart.js Migration Example - Agent-OS Dashboard</title>
    <link rel="stylesheet" href="design-system.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="dashboard-container">
        <!-- Header -->
        <header class="dashboard-header">
            <div class="header-content">
                <div class="header-left">
                    <h1 class="dashboard-title">
                        <span class="title-icon">ðŸ“Š</span>
                        Chart.js Migration Example
                        <span class="version-badge">Simple & Fast</span>
                    </h1>
                    <p class="dashboard-subtitle">Replacing complex 3D charts with lightweight 2D alternatives</p>
                </div>
                <div class="header-right">
                    <div class="status-indicator">
                        <span class="status-dot status-online"></span>
                        <span class="status-text">Chart.js Ready</span>
                    </div>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="dashboard-main">
            <!-- Chart Grid -->
            <div class="chart-grid">
                <!-- System Performance Chart -->
                <div class="chart-card fade-in">
                    <div class="chart-card-header">
                        <h3 class="chart-card-title">System Performance Metrics</h3>
                        <div class="chart-card-actions">
                            <button class="chart-card-action" onclick="exportChart('performance-chart')">Export</button>
                            <button class="chart-card-action" onclick="updatePerformanceData()">Update</button>
                        </div>
                    </div>
                    <div class="chart-container">
                        <canvas id="performance-chart" width="400" height="300"></canvas>
                    </div>
                </div>

                <!-- Real-time Trends Chart -->
                <div class="chart-card fade-in">
                    <div class="chart-card-header">
                        <h3 class="chart-card-title">Real-time System Trends</h3>
                        <div class="chart-card-actions">
                            <button class="chart-card-action" onclick="exportChart('trends-chart')">Export</button>
                            <button class="chart-card-action" onclick="toggleRealTime()">Toggle RT</button>
                        </div>
                    </div>
                    <div class="chart-container">
                        <canvas id="trends-chart" width="400" height="300"></canvas>
                    </div>
                </div>

                <!-- System Health Overview -->
                <div class="chart-card fade-in">
                    <div class="chart-card-header">
                        <h3 class="chart-card-title">System Health Overview</h3>
                        <div class="chart-card-actions">
                            <button class="chart-card-action" onclick="exportChart('health-chart')">Export</button>
                            <button class="chart-card-action" onclick="refreshHealthData()">Refresh</button>
                        </div>
                    </div>
                    <div class="chart-container">
                        <canvas id="health-chart" width="400" height="300"></canvas>
                    </div>
                </div>

                <!-- Mixed Chart Example -->
                <div class="chart-card fade-in">
                    <div class="chart-card-header">
                        <h3 class="chart-card-title">Mixed Chart Types</h3>
                        <div class="chart-card-actions">
                            <button class="chart-card-action" onclick="exportChart('mixed-chart')">Export</button>
                            <button class="chart-card-action" onclick="addDataset()">Add Data</button>
                        </div>
                    </div>
                    <div class="chart-container">
                        <canvas id="mixed-chart" width="400" height="300"></canvas>
                    </div>
                </div>
            </div>

            <!-- Performance Comparison -->
            <section class="performance-comparison">
                <div class="chart-card fade-in">
                    <div class="chart-card-header">
                        <h3 class="chart-card-title">Migration Benefits</h3>
                    </div>
                    <div class="comparison-grid">
                        <div class="comparison-item">
                            <h4>Bundle Size</h4>
                            <div class="comparison-value old">500KB+ (Three.js)</div>
                            <div class="comparison-value new">69KB (Chart.js)</div>
                            <div class="improvement">87% reduction</div>
                        </div>
                        <div class="comparison-item">
                            <h4>Code Lines</h4>
                            <div class="comparison-value old">383 lines (3D)</div>
                            <div class="comparison-value new">20 lines (2D)</div>
                            <div class="improvement">95% reduction</div>
                        </div>
                        <div class="comparison-item">
                            <h4>Mobile Performance</h4>
                            <div class="comparison-value old">Poor (3D)</div>
                            <div class="comparison-value new">Excellent (2D)</div>
                            <div class="improvement">5x better</div>
                        </div>
                        <div class="comparison-item">
                            <h4>Accessibility</h4>
                            <div class="comparison-value old">Limited (3D)</div>
                            <div class="comparison-value new">Built-in (2D)</div>
                            <div class="improvement">Full support</div>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <script>
        // Chart instances
        let performanceChart, trendsChart, healthChart, mixedChart;
        let realTimeInterval;

        // Initialize charts when DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            initializeCharts();
            startRealTimeUpdates();
        });

        function initializeCharts() {
            // Performance Chart (Bar)
            const performanceCtx = document.getElementById('performance-chart').getContext('2d');
            performanceChart = new Chart(performanceCtx, {
                type: 'bar',
                data: {
                    labels: ['CPU', 'Memory', 'Network', 'Disk', 'Processes'],
                    datasets: [{
                        label: 'Current Usage (%)',
                        data: [75, 68, 32, 45, 23],
                        backgroundColor: [
                            'rgba(255, 99, 132, 0.8)',
                            'rgba(54, 162, 235, 0.8)',
                            'rgba(255, 205, 86, 0.8)',
                            'rgba(75, 192, 192, 0.8)',
                            'rgba(153, 102, 255, 0.8)'
                        ],
                        borderColor: [
                            'rgba(255, 99, 132, 1)',
                            'rgba(54, 162, 235, 1)',
                            'rgba(255, 205, 86, 1)',
                            'rgba(75, 192, 192, 1)',
                            'rgba(153, 102, 255, 1)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top',
                        },
                        title: {
                            display: true,
                            text: 'System Performance Metrics'
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100
                        }
                    }
                }
            });

            // Trends Chart (Line)
            const trendsCtx = document.getElementById('trends-chart').getContext('2d');
            trendsChart = new Chart(trendsCtx, {
                type: 'line',
                data: {
                    labels: ['00:00', '04:00', '08:00', '12:00', '16:00', '20:00'],
                    datasets: [{
                        label: 'CPU Usage',
                        data: [45, 52, 78, 85, 72, 68],
                        borderColor: 'rgba(255, 99, 132, 1)',
                        backgroundColor: 'rgba(255, 99, 132, 0.1)',
                        fill: true,
                        tension: 0.4
                    }, {
                        label: 'Memory Usage',
                        data: [60, 65, 72, 78, 75, 70],
                        borderColor: 'rgba(54, 162, 235, 1)',
                        backgroundColor: 'rgba(54, 162, 235, 0.1)',
                        fill: true,
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top',
                        },
                        title: {
                            display: true,
                            text: '24-Hour System Trends'
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100
                        }
                    }
                }
            });

            // Health Chart (Doughnut)
            const healthCtx = document.getElementById('health-chart').getContext('2d');
            healthChart = new Chart(healthCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Healthy', 'Warning', 'Critical', 'Offline'],
                    datasets: [{
                        data: [65, 20, 10, 5],
                        backgroundColor: [
                            'rgba(75, 192, 192, 0.8)',
                            'rgba(255, 205, 86, 0.8)',
                            'rgba(255, 99, 132, 0.8)',
                            'rgba(201, 203, 207, 0.8)'
                        ],
                        borderColor: [
                            'rgba(75, 192, 192, 1)',
                            'rgba(255, 205, 86, 1)',
                            'rgba(255, 99, 132, 1)',
                            'rgba(201, 203, 207, 1)'
                        ],
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                        },
                        title: {
                            display: true,
                            text: 'System Health Status'
                        }
                    }
                }
            });

            // Mixed Chart (Bar + Line)
            const mixedCtx = document.getElementById('mixed-chart').getContext('2d');
            mixedChart = new Chart(mixedCtx, {
                type: 'bar',
                data: {
                    labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                    datasets: [{
                        type: 'bar',
                        label: 'System Load',
                        data: [65, 59, 80, 81, 56, 55],
                        backgroundColor: 'rgba(54, 162, 235, 0.8)',
                        borderColor: 'rgba(54, 162, 235, 1)',
                        borderWidth: 1
                    }, {
                        type: 'line',
                        label: 'Performance Trend',
                        data: [65, 59, 80, 81, 56, 55],
                        borderColor: 'rgba(255, 99, 132, 1)',
                        backgroundColor: 'rgba(255, 99, 132, 0.1)',
                        fill: false,
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top',
                        },
                        title: {
                            display: true,
                            text: 'Mixed Chart Types'
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
        }

        function startRealTimeUpdates() {
            realTimeInterval = setInterval(() => {
                // Update performance data
                const newData = performanceChart.data.datasets[0].data.map(() => 
                    Math.floor(Math.random() * 100)
                );
                performanceChart.data.datasets[0].data = newData;
                performanceChart.update('none');

                // Update trends data
                const timeLabels = trendsChart.data.labels;
                const newTime = new Date().toLocaleTimeString('en-US', { 
                    hour12: false, 
                    hour: '2-digit', 
                    minute: '2-digit' 
                });
                
                if (timeLabels.length > 10) {
                    timeLabels.shift();
                    trendsChart.data.datasets.forEach(dataset => dataset.data.shift());
                }
                
                timeLabels.push(newTime);
                trendsChart.data.datasets[0].data.push(Math.floor(Math.random() * 100));
                trendsChart.data.datasets[1].data.push(Math.floor(Math.random() * 100));
                trendsChart.update('none');
            }, 3000);
        }

        function updatePerformanceData() {
            const newData = performanceChart.data.datasets[0].data.map(() => 
                Math.floor(Math.random() * 100)
            );
            performanceChart.data.datasets[0].data = newData;
            performanceChart.update();
        }

        function refreshHealthData() {
            const newData = healthChart.data.datasets[0].data.map(() => 
                Math.floor(Math.random() * 100)
            );
            healthChart.data.datasets[0].data = newData;
            healthChart.update();
        }

        function addDataset() {
            const newDataset = {
                type: 'line',
                label: 'New Dataset ' + (mixedChart.data.datasets.length + 1),
                data: Array.from({length: 6}, () => Math.floor(Math.random() * 100)),
                borderColor: `hsl(${Math.random() * 360}, 70%, 50%)`,
                backgroundColor: `hsla(${Math.random() * 360}, 70%, 50%, 0.1)`,
                fill: false,
                tension: 0.4
            };
            mixedChart.data.datasets.push(newDataset);
            mixedChart.update();
        }

        function toggleRealTime() {
            if (realTimeInterval) {
                clearInterval(realTimeInterval);
                realTimeInterval = null;
                document.querySelector('[onclick="toggleRealTime()"]').textContent = 'Start RT';
            } else {
                startRealTimeUpdates();
                document.querySelector('[onclick="toggleRealTime()"]').textContent = 'Stop RT';
            }
        }

        function exportChart(chartId) {
            const chart = getChartById(chartId);
            if (chart) {
                const link = document.createElement('a');
                link.download = `${chartId}.png`;
                link.href = chart.toBase64Image();
                link.click();
            }
        }

        function getChartById(chartId) {
            switch(chartId) {
                case 'performance-chart': return performanceChart;
                case 'trends-chart': return trendsChart;
                case 'health-chart': return healthChart;
                case 'mixed-chart': return mixedChart;
                default: return null;
            }
        }

        // Mobile optimization
        function handleResize() {
            const charts = [performanceChart, trendsChart, healthChart, mixedChart];
            charts.forEach(chart => {
                if (chart) {
                    chart.resize();
                }
            });
        }

        window.addEventListener('resize', handleResize);
    </script>

    <style>
        .comparison-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: var(--spacing-4);
            padding: var(--spacing-4);
        }

        .comparison-item {
            background-color: var(--color-surface-elevated);
            border: 1px solid var(--color-border-light);
            border-radius: var(--radius-lg);
            padding: var(--spacing-4);
            text-align: center;
        }

        .comparison-item h4 {
            margin: 0 0 var(--spacing-2) 0;
            color: var(--color-text-primary);
            font-size: var(--font-size-lg);
            font-weight: var(--font-weight-semibold);
        }

        .comparison-value {
            font-size: var(--font-size-sm);
            margin: var(--spacing-1) 0;
            padding: var(--spacing-1);
            border-radius: var(--radius-md);
        }

        .comparison-value.old {
            background-color: var(--color-error-50);
            color: var(--color-error-700);
            text-decoration: line-through;
        }

        .comparison-value.new {
            background-color: var(--color-success-50);
            color: var(--color-success-700);
            font-weight: var(--font-weight-semibold);
        }

        .improvement {
            font-size: var(--font-size-xs);
            color: var(--color-text-secondary);
            margin-top: var(--spacing-1);
        }

        .chart-container {
            position: relative;
            height: 300px;
            padding: var(--spacing-4);
        }

        @media (max-width: 768px) {
            .comparison-grid {
                grid-template-columns: 1fr;
            }
            
            .chart-container {
                height: 250px;
            }
        }
    </style>
</body>
</html>
