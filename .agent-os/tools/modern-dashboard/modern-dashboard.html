<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agent-OS Enhanced Dashboard - Phase 2</title>
    <link rel="stylesheet" href="/modern-dashboard/design-system.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        // Verify Chart.js loading
        window.addEventListener('load', function() {
            console.log('üîç Checking Chart.js loading...');
            
            if (typeof Chart === 'undefined') {
                console.error('‚ùå Chart.js failed to load from CDN');
                // Try alternative CDN
                const script = document.createElement('script');
                script.src = 'https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.5.0/chart.min.js';
                script.onload = function() {
                    console.log('‚úÖ Chart.js loaded from alternative CDN');
                };
                document.head.appendChild(script);
            } else {
                console.log('‚úÖ Chart.js loaded successfully');
            }
        });
    </script>
    <script>
        // Debug script loading
        window.addEventListener('load', function() {
            console.log('Chart.js loaded:', typeof Chart !== 'undefined');
        });
    </script>
</head>
<body>
    <div class="dashboard-container">
        <!-- Header -->
        <header class="dashboard-header">
            <div class="header-content">
                <div class="header-left">
                    <h1 class="dashboard-title">
                        <span class="title-icon">üöÄ</span>
                        Agent-OS Enhanced Dashboard
                        <span class="version-badge">Phase 2</span>
                    </h1>
                    <p class="dashboard-subtitle">Advanced 3D Visualizations & Interactive Analytics</p>
                </div>
                <div class="header-right">
                    <div id="theme-toggle-container"></div>
                    <div class="status-indicator">
                        <span class="status-dot status-online"></span>
                        <span class="status-text">System Online</span>
                    </div>
                    <!-- Quick Actions Menu -->
                    <div class="quick-actions-menu">
                        <button class="quick-action-btn" onclick="uiManager.openGlobalSearch()" title="Search (Ctrl+K)">
                            <span class="action-icon">üîç</span>
                        </button>
                        <button class="quick-action-btn" onclick="uiManager.openQuickActionsModal()" title="Quick Actions (Ctrl+M)">
                            <span class="action-icon">‚ö°</span>
                        </button>
                        <button class="quick-action-btn" onclick="uiManager.showSystemInfo()" title="System Info">
                            <span class="action-icon">‚ÑπÔ∏è</span>
                        </button>
                    </div>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="dashboard-main">
            <!-- Chart Grid -->
            <div class="chart-grid">
                <!-- Left Column: Stacked Charts -->
                <div class="chart-column">
                    <!-- Chart.js Line Chart Card -->
                    <div class="chart-card fade-in">
                        <div class="chart-card-header">
                            <h3 class="chart-card-title">System Analysis Overview</h3>
                            <div class="chart-card-actions">
                                <button class="chart-card-action" onclick="exportChart('line-chart')">Export</button>
                                <button class="chart-card-action" onclick="updateLineChart()">Update</button>
                            </div>
                        </div>
                        <div class="chart-container" id="line-chart-container">
                            <canvas id="line-chart" width="400" height="300"></canvas>
                            <div class="chart-controls" id="line-chart-controls">
                                <div class="control-group">
                                    <label for="line-chart-type">Chart Type:</label>
                                    <select id="line-chart-type" onchange="changeLineChartType(this.value)">
                                        <option value="line">Line Chart</option>
                                        <option value="bar">Bar Chart</option>
                                        <option value="scatter">Scatter Chart</option>
                                    </select>
                                </div>
                                <div class="control-group">
                                    <label for="line-animation-speed">Animation Speed:</label>
                                    <input type="range" id="line-animation-speed" min="0.1" max="2" step="0.1" value="1" 
                                           onchange="setAnimationSpeed('line-chart', this.value)">
                                </div>
                                <div class="control-group">
                                    <button class="btn btn-secondary" onclick="resetLineChart()">Reset</button>
                                    <button class="btn btn-primary" onclick="exportChart('line-chart')">Export</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Chart.js Bar Chart Card -->
                    <div class="chart-card fade-in">
                        <div class="chart-card-header">
                            <h3 class="chart-card-title">System Performance Metrics</h3>
                            <div class="chart-card-actions">
                                <button class="chart-card-action" onclick="exportChart('bar-chart')">Export</button>
                                <button class="chart-card-action" onclick="updateBarChart()">Update</button>
                            </div>
                        </div>
                        <div class="chart-container" id="bar-chart-container">
                            <canvas id="bar-chart" width="400" height="300"></canvas>
                            <div class="chart-controls" id="bar-chart-controls">
                                <div class="control-group">
                                    <label for="bar-chart-type">Chart Type:</label>
                                    <select id="bar-chart-type" onchange="changeBarChartType(this.value)">
                                        <option value="bar">Bar Chart</option>
                                        <option value="line">Line Chart</option>
                                        <option value="doughnut">Doughnut Chart</option>
                                    </select>
                                </div>
                                <div class="control-group">
                                    <label for="bar-animation-speed">Animation Speed:</label>
                                    <input type="range" id="bar-animation-speed" min="0.1" max="2" step="0.1" value="1" 
                                           onchange="setAnimationSpeed('bar-chart', this.value)">
                                </div>
                                <div class="control-group">
                                    <button class="btn btn-secondary" onclick="resetBarChart()">Reset</button>
                                    <button class="btn btn-primary" onclick="exportChart('bar-chart')">Export</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Right Column: Real-time Metrics Card -->
                <div class="chart-column">
                    <!-- Real-time Metrics Card -->
                    <div class="chart-card fade-in">
                        <div class="chart-card-header">
                            <h3 class="chart-card-title">Real-time System Health</h3>
                            <div class="chart-card-actions">
                                <button class="chart-card-action" onclick="refreshMetrics()">Refresh</button>
                            </div>
                        </div>
                        <div class="metrics-grid">
                            <div class="metric-card">
                                <div class="metric-header">
                                    <span class="metric-icon">üñ•Ô∏è</span>
                                    <span class="metric-label">CPU Usage</span>
                                </div>
                                <div class="metric-value" id="cpu-usage">75%</div>
                                <div class="metric-progress">
                                    <div class="progress-bar" style="width: 75%"></div>
                                </div>
                                <div class="metric-trend trend-stable">Stable</div>
                            </div>
                            <div class="metric-card">
                                <div class="metric-header">
                                    <span class="metric-icon">üíæ</span>
                                    <span class="metric-label">Memory</span>
                                </div>
                                <div class="metric-value" id="memory-usage">68%</div>
                                <div class="metric-progress">
                                    <div class="progress-bar" style="width: 68%"></div>
                                </div>
                                <div class="metric-trend trend-increasing">Increasing</div>
                            </div>
                            <div class="metric-card">
                                <div class="metric-header">
                                    <span class="metric-icon">üåê</span>
                                    <span class="metric-label">Network</span>
                                </div>
                                <div class="metric-value" id="network-usage">32%</div>
                                <div class="metric-progress">
                                    <div class="progress-bar" style="width: 32%"></div>
                                </div>
                                <div class="metric-trend trend-decreasing">Decreasing</div>
                            </div>
                            <div class="metric-card">
                                <div class="metric-header">
                                    <span class="metric-icon">üíø</span>
                                    <span class="metric-label">Disk I/O</span>
                                </div>
                                <div class="metric-value" id="disk-usage">45%</div>
                                <div class="metric-progress">
                                    <div class="progress-bar" style="width: 45%"></div>
                                </div>
                                <div class="metric-trend trend-stable">Stable</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Performance Analytics Card -->
                <div class="chart-card fade-in">
                    <div class="chart-card-header">
                        <h3 class="chart-card-title">Performance Analytics</h3>
                        <div class="chart-card-actions">
                            <button class="chart-card-action" onclick="toggleAnalytics()">Toggle</button>
                        </div>
                    </div>
                    <div class="analytics-grid">
                        <div class="analytics-item">
                            <div class="analytics-label">Response Time</div>
                            <div class="analytics-value" id="response-time">125ms</div>
                            <div class="analytics-target">Target: 200ms</div>
                        </div>
                        <div class="analytics-item">
                            <div class="analytics-label">Throughput</div>
                            <div class="analytics-value" id="throughput">1,500 req/s</div>
                            <div class="analytics-target">Target: 2,000 req/s</div>
                        </div>
                        <div class="analytics-item">
                            <div class="analytics-label">Error Rate</div>
                            <div class="analytics-value" id="error-rate">0.5%</div>
                            <div class="analytics-target">Target: 1.0%</div>
                        </div>
                        <div class="analytics-item">
                            <div class="analytics-label">Availability</div>
                            <div class="analytics-value" id="availability">99.8%</div>
                            <div class="analytics-target">Target: 99.9%</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- New Enhanced Data Sections -->
            
            <!-- Lessons Learned & Compliance Section -->
            <section class="enhanced-data-section">
                <h2 class="section-title">Lessons Learned & Compliance</h2>
                <div class="data-grid">
                    <!-- Lessons Learned Card -->
                    <div class="chart-card fade-in">
                        <div class="chart-card-header">
                            <h3 class="chart-card-title">üìö Recent Lessons Learned</h3>
                            <div class="chart-card-actions">
                                <button class="chart-card-action" onclick="refreshLessonsLearned()">Refresh</button>
                                <button class="chart-card-action" onclick="exportLessonsLearned()">Export</button>
                            </div>
                        </div>
                        <div class="lessons-container" id="lessons-learned-container">
                            <div class="lesson-item">
                                <div class="lesson-header">
                                    <span class="lesson-type critical">üö® Critical</span>
                                    <span class="lesson-date">2025-01-27</span>
                                </div>
                                <div class="lesson-title">Deployment Fixes & Alpine Linux Dependencies</div>
                                <div class="lesson-summary">Alpine Linux requires libstdc++ and libgomp for ONNX/TensorFlow - add to Dockerfile</div>
                                <div class="lesson-status applied">Applied</div>
                            </div>
                            <div class="lesson-item">
                                <div class="lesson-header">
                                    <span class="lesson-type warning">‚ö†Ô∏è Warning</span>
                                    <span class="lesson-date">2025-01-27</span>
                                </div>
                                <div class="lesson-title">PowerShell Command Chaining</div>
                                <div class="lesson-summary">PowerShell doesn't support && operator - use semicolons or separate commands</div>
                                <div class="lesson-status pending">Pending</div>
                            </div>
                            <div class="lesson-item">
                                <div class="lesson-header">
                                    <span class="lesson-type info">‚ÑπÔ∏è Info</span>
                                    <span class="lesson-date">2025-01-27</span>
                                </div>
                                <div class="lesson-title">Test-Driven Database Development</div>
                                <div class="lesson-summary">Write entity tests first, then repository tests, then migration scripts</div>
                                <div class="lesson-status applied">Applied</div>
                            </div>
                        </div>
                    </div>

                    <!-- Compliance Metrics Card -->
                    <div class="chart-card fade-in">
                        <div class="chart-card-header">
                            <h3 class="chart-card-title">‚úÖ Live Compliance Metrics</h3>
                            <div class="chart-card-actions">
                                <button class="chart-card-action" onclick="refreshComplianceMetrics()">Refresh</button>
                            </div>
                        </div>
                        <div class="compliance-metrics" id="compliance-metrics">
                            <div class="metric-row">
                                <div class="metric-label">Compliance Score</div>
                                <div class="metric-value compliance-score" id="compliance-score">100%</div>
                                <div class="metric-trend trend-stable">Stable</div>
                            </div>
                            <div class="metric-row">
                                <div class="metric-label">Critical Violations</div>
                                <div class="metric-value critical-violations" id="critical-violations">0</div>
                                <div class="metric-trend trend-decreasing">Decreasing</div>
                            </div>
                            <div class="metric-row">
                                <div class="metric-label">Files Processed</div>
                                <div class="metric-value files-processed" id="files-processed">152</div>
                                <div class="metric-trend trend-increasing">Increasing</div>
                            </div>
                            <div class="metric-row">
                                <div class="metric-label">Processing Efficiency</div>
                                <div class="metric-value processing-efficiency" id="processing-efficiency">85%</div>
                                <div class="metric-trend trend-stable">Stable</div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Cache Performance & Analytics Section -->
            <section class="enhanced-data-section">
                <h2 class="section-title">Cache Performance & Analytics</h2>
                <div class="data-grid">
                    <!-- Cache Performance Card -->
                    <div class="chart-card fade-in">
                        <div class="chart-card-header">
                            <h3 class="chart-card-title">Cache Performance Metrics</h3>
                            <div class="chart-card-actions">
                                <button class="chart-card-action" onclick="refreshCacheMetrics()">Refresh</button>
                            </div>
                        </div>
                        <div class="cache-metrics">
                            <div class="metric-row">
                                <span class="metric-label">Cache Hit Rate:</span>
                                <span class="metric-value" id="cache-hit-rate">92.5%</span>
                            </div>
                            <div class="metric-row">
                                <span class="metric-label">Cache Miss Rate:</span>
                                <span class="metric-value" id="cache-miss-rate">7.5%</span>
                            </div>
                            <div class="metric-row">
                                <span class="metric-label">Cache Size:</span>
                                <span class="metric-value" id="cache-size">256MB</span>
                            </div>
                            <div class="metric-row">
                                <span class="metric-label">Cache Evictions:</span>
                                <span class="metric-value" id="cache-evictions">12</span>
                            </div>
                            <div class="metric-row">
                                <span class="metric-label">Average Response Time:</span>
                                <span class="metric-value" id="avg-cache-response">45ms</span>
                            </div>
                            <div class="metric-row">
                                <span class="metric-label">Cache Efficiency:</span>
                                <span class="metric-value" id="cache-efficiency">94.2%</span>
                            </div>
                        </div>
                    </div>
                    <!-- AI Processing Analytics Card -->
                    <div class="chart-card fade-in">
                        <div class="chart-card-header">
                            <h3 class="chart-card-title">AI Processing Analytics</h3>
                            <div class="chart-card-actions">
                                <button class="chart-card-action" onclick="refreshAIProcessingMetrics()">Refresh</button>
                            </div>
                        </div>
                        <div class="ai-processing-metrics">
                            <div class="metric-row">
                                <span class="metric-label">AI Requests/sec:</span>
                                <span class="metric-value" id="ai-requests-per-sec">15.3</span>
                            </div>
                            <div class="metric-row">
                                <span class="metric-label">Average AI Response Time:</span>
                                <span class="metric-value" id="avg-ai-response">125ms</span>
                            </div>
                            <div class="metric-row">
                                <span class="metric-label">AI Cache Hit Rate:</span>
                                <span class="metric-value" id="ai-cache-hit-rate">78.4%</span>
                            </div>
                            <div class="metric-row">
                                <span class="metric-label">Model Loading Time:</span>
                                <span class="metric-value" id="model-loading-time">2.1s</span>
                            </div>
                            <div class="metric-row">
                                <span class="metric-label">Memory Usage (AI):</span>
                                <span class="metric-value" id="ai-memory-usage">1.2GB</span>
                            </div>
                            <div class="metric-row">
                                <span class="metric-label">GPU Utilization:</span>
                                <span class="metric-value" id="gpu-utilization">45%</span>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- System Health & Performance Section -->
            <section class="enhanced-data-section">
                <h2 class="section-title">System Health & Performance</h2>
                <div class="data-grid">
                    <!-- System Health Card -->
                    <div class="chart-card fade-in">
                        <div class="chart-card-header">
                            <h3 class="chart-card-title">üè• Agent-OS System Health</h3>
                            <div class="chart-card-actions">
                                <button class="chart-card-action" onclick="runSystemDiagnostics()">Diagnose</button>
                            </div>
                        </div>
                        <div class="system-health-grid" id="system-health-grid">
                            <div class="health-item">
                                <div class="health-icon">üñ•Ô∏è</div>
                                <div class="health-details">
                                    <div class="health-label">Platform</div>
                                    <div class="health-value" id="platform-info">Windows 10</div>
                                </div>
                                <div class="health-status healthy">Healthy</div>
                            </div>
                            <div class="health-item">
                                <div class="health-icon">üì¶</div>
                                <div class="health-details">
                                    <div class="health-label">Node.js</div>
                                    <div class="health-value" id="node-version">v22.16.0</div>
                                </div>
                                <div class="health-status healthy">Compatible</div>
                            </div>
                            <div class="health-item">
                                <div class="health-icon">üîß</div>
                                <div class="health-details">
                                    <div class="health-label">Dependencies</div>
                                    <div class="health-value" id="dependencies-status">All Present</div>
                                </div>
                                <div class="health-status healthy">Valid</div>
                            </div>
                            <div class="health-item">
                                <div class="health-icon">üìÅ</div>
                                <div class="health-details">
                                    <div class="health-label">Repository</div>
                                    <div class="health-value" id="repo-status">Complete</div>
                                </div>
                                <div class="health-status healthy">Valid</div>
                            </div>
                        </div>
                    </div>

                    <!-- Performance Analytics Card -->
                    <div class="chart-card fade-in">
                        <div class="chart-card-header">
                            <h3 class="chart-card-title">üìä Development Performance</h3>
                            <div class="chart-card-actions">
                                <button class="chart-card-action" onclick="refreshPerformanceMetrics()">Refresh</button>
                            </div>
                        </div>
                        <div class="performance-metrics" id="performance-metrics">
                            <div class="performance-item">
                                <div class="performance-label">Uptime</div>
                                <div class="performance-value" id="uptime-value">15 days</div>
                                <div class="performance-bar">
                                    <div class="bar-fill" style="width: 95%"></div>
                                </div>
                            </div>
                            <div class="performance-item">
                                <div class="performance-label">Total Requests</div>
                                <div class="performance-value" id="total-requests">57</div>
                                <div class="performance-bar">
                                    <div class="bar-fill" style="width: 78%"></div>
                                </div>
                            </div>
                            <div class="performance-item">
                                <div class="performance-label">Avg Processing Time</div>
                                <div class="performance-value" id="avg-processing-time">150ms</div>
                                <div class="performance-bar">
                                    <div class="bar-fill" style="width: 65%"></div>
                                </div>
                            </div>
                            <div class="performance-item">
                                <div class="performance-label">Memory Usage</div>
                                <div class="performance-value" id="memory-usage-perf">45%</div>
                                <div class="performance-bar">
                                    <div class="bar-fill" style="width: 45%"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Project Status & Development Analytics Section -->
            <section class="enhanced-data-section">
                <h2 class="section-title">Project Status & Development Analytics</h2>
                <div class="data-grid">
                    <!-- Project Progress Card -->
                    <div class="chart-card fade-in">
                        <div class="chart-card-header">
                            <h3 class="chart-card-title">üöÄ Project Progress</h3>
                            <div class="chart-card-actions">
                                <button class="chart-card-action" onclick="refreshProjectStatus()">Refresh</button>
                            </div>
                        </div>
                        <div class="project-progress" id="project-progress">
                            <div class="phase-item">
                                <div class="phase-header">
                                    <span class="phase-name">Phase 1: Foundation</span>
                                    <span class="phase-status completed">‚úÖ Complete</span>
                                </div>
                                <div class="phase-progress">
                                    <div class="progress-bar" style="width: 100%"></div>
                                </div>
                            </div>
                            <div class="phase-item">
                                <div class="phase-header">
                                    <span class="phase-name">Phase 2: Integration</span>
                                    <span class="phase-status in-progress">üîÑ In Progress</span>
                                </div>
                                <div class="phase-progress">
                                    <div class="progress-bar" style="width: 75%"></div>
                                </div>
                            </div>
                            <div class="phase-item">
                                <div class="phase-header">
                                    <span class="phase-name">Phase 3: Advanced Features</span>
                                    <span class="phase-status pending">‚è≥ Pending</span>
                                </div>
                                <div class="phase-progress">
                                    <div class="progress-bar" style="width: 25%"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Development Velocity Card -->
                    <div class="chart-card fade-in">
                        <div class="chart-card-header">
                            <h3 class="chart-card-title">üìà Development Velocity</h3>
                            <div class="chart-card-actions">
                                <button class="chart-card-action" onclick="refreshVelocityMetrics()">Refresh</button>
                            </div>
                        </div>
                        <div class="velocity-metrics" id="velocity-metrics">
                            <div class="velocity-item">
                                <div class="velocity-label">Tasks Completed Today</div>
                                <div class="velocity-value" id="tasks-completed">12</div>
                                <div class="velocity-trend trend-increasing">+3</div>
                            </div>
                            <div class="velocity-item">
                                <div class="velocity-label">Average Task Time</div>
                                <div class="velocity-value" id="avg-task-time">45min</div>
                                <div class="velocity-trend trend-decreasing">-5min</div>
                            </div>
                            <div class="velocity-item">
                                <div class="velocity-label">Code Quality Score</div>
                                <div class="velocity-value" id="code-quality">92%</div>
                                <div class="velocity-trend trend-increasing">+2%</div>
                            </div>
                            <div class="velocity-item">
                                <div class="velocity-label">Test Coverage</div>
                                <div class="velocity-value" id="test-coverage">87%</div>
                                <div class="velocity-trend trend-stable">0%</div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Database & Storage Analytics Section -->
            <section class="enhanced-data-section">
                <h2 class="section-title">Database & Storage Analytics</h2>
                <div class="data-grid">
                    <!-- Database Performance Card -->
                    <div class="chart-card fade-in">
                        <div class="chart-card-header">
                            <h3 class="chart-card-title">Database Performance</h3>
                            <div class="chart-card-actions">
                                <button class="chart-card-action" onclick="refreshDatabaseMetrics()">Refresh</button>
                            </div>
                        </div>
                        <div class="database-metrics">
                            <div class="metric-row">
                                <span class="metric-label">Query Response Time:</span>
                                <span class="metric-value" id="query-response-time">23ms</span>
                            </div>
                            <div class="metric-row">
                                <span class="metric-label">Connection Pool Usage:</span>
                                <span class="metric-value" id="connection-pool-usage">67%</span>
                            </div>
                            <div class="metric-row">
                                <span class="metric-label">Active Connections:</span>
                                <span class="metric-value" id="active-connections">8/12</span>
                            </div>
                            <div class="metric-row">
                                <span class="metric-label">Slow Queries (>100ms):</span>
                                <span class="metric-value" id="slow-queries">3</span>
                            </div>
                            <div class="metric-row">
                                <span class="metric-label">Index Hit Rate:</span>
                                <span class="metric-value" id="index-hit-rate">96.8%</span>
                            </div>
                            <div class="metric-row">
                                <span class="metric-label">Database Size:</span>
                                <span class="metric-value" id="database-size">2.4GB</span>
                            </div>
                        </div>
                    </div>
                    <!-- Storage Analytics Card -->
                    <div class="chart-card fade-in">
                        <div class="chart-card-header">
                            <h3 class="chart-card-title">Storage Analytics</h3>
                            <div class="chart-card-actions">
                                <button class="chart-card-action" onclick="refreshStorageMetrics()">Refresh</button>
                            </div>
                        </div>
                        <div class="storage-metrics">
                            <div class="metric-row">
                                <span class="metric-label">Disk Usage:</span>
                                <span class="metric-value" id="disk-usage">34.2%</span>
                            </div>
                            <div class="metric-row">
                                <span class="metric-label">Available Space:</span>
                                <span class="metric-value" id="available-space">156GB</span>
                            </div>
                            <div class="metric-row">
                                <span class="metric-label">I/O Operations/sec:</span>
                                <span class="metric-value" id="io-operations">1,247</span>
                            </div>
                            <div class="metric-row">
                                <span class="metric-label">Read Speed:</span>
                                <span class="metric-value" id="read-speed">245MB/s</span>
                            </div>
                            <div class="metric-row">
                                <span class="metric-label">Write Speed:</span>
                                <span class="metric-value" id="write-speed">189MB/s</span>
                            </div>
                            <div class="metric-row">
                                <span class="metric-label">Storage Efficiency:</span>
                                <span class="metric-value" id="storage-efficiency">87.3%</span>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Data Table Section -->
            <section class="data-table-section">
                <div class="chart-card fade-in">
                    <div class="chart-card-header">
                        <h3 class="chart-card-title">System Events & Logs</h3>
                        <div class="chart-card-actions">
                            <button class="chart-card-action" onclick="refreshDataTable()">Refresh</button>
                            <button class="chart-card-action" onclick="exportDataTable()">Export</button>
                        </div>
                    </div>
                    <div class="data-table-container" id="system-events-table">
                        <!-- Data table will be initialized here -->
                    </div>
                </div>
            </section>

            <!-- Quick Actions -->
            <section class="quick-actions">
                <h2 class="section-title">Quick Actions</h2>
                <div class="actions-grid">
                    <button class="action-button" onclick="showSystemInfo()">
                        <span class="action-icon">‚ÑπÔ∏è</span>
                        <span class="action-text">System Info</span>
                    </button>
                    <button class="action-button" onclick="exportDashboard()">
                        <span class="action-icon">üìä</span>
                        <span class="action-text">Export Data</span>
                    </button>
                    <button class="action-button" onclick="showSettings()">
                        <span class="action-icon">‚öôÔ∏è</span>
                        <span class="action-text">Settings</span>
                    </button>
                    <button class="action-button" onclick="showHelp()">
                        <span class="action-icon">‚ùì</span>
                        <span class="action-text">Help</span>
                    </button>
                    <button class="action-button" onclick="showNotifications()">
                        <span class="action-icon">üîî</span>
                        <span class="action-text">Notifications</span>
                    </button>
                    <button class="action-button" onclick="showDataTable()">
                        <span class="action-icon">üìã</span>
                        <span class="action-text">Data Table</span>
                    </button>
                </div>
            </section>
        </main>
    </div>

    <!-- Scripts -->
    <script src="/modern-dashboard/theme-manager.js"></script>
    <script src="/modern-dashboard/data/sample-datasets.js"></script>
    
    <!-- New UI Components -->
    <script src="/modern-dashboard/js/components/NotificationSystem.js"></script>
    <script src="/modern-dashboard/js/components/ModalSystem.js"></script>
    <script src="/modern-dashboard/js/components/DataTable.js"></script>
    <script src="/modern-dashboard/js/components/UIManager.js"></script>
    
    <script>
        // Global chart instances
        let barChart = null;
        let scatterChart = null;
        let uiManager = null;
        let systemEventsTable = null;
        
        // Global error handler
        window.addEventListener('error', function(event) {
            console.error('üö® Global error caught:', event.error);
            console.error('Error details:', event.error.stack);
        });
        
        // Initialize dashboard
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üìÑ DOM Content Loaded');
            // Wait longer for CDN libraries to load
            setTimeout(() => {
                initializeDashboard();
            }, 3000);
        });
        
        function initializeDashboard() {
            console.log('üöÄ Initializing dashboard...');
            
            // Check if Chart.js is loaded
            if (typeof Chart === 'undefined') {
                console.error('‚ùå Chart.js not loaded, retrying in 2 seconds...');
                setTimeout(() => {
                    initializeDashboard();
                }, 2000);
                return;
            }
            
            console.log('‚úÖ Chart.js is available');
            
            // Initialize Chart.js charts FIRST (before UI components)
            console.log('üìä Initializing Chart.js charts...');
            try {
                initializeBarChart();
                initializeLineChart();
                console.log('‚úÖ Charts initialized successfully');
            } catch (error) {
                console.error('‚ùå Error initializing charts:', error);
            }
            
            // Try to initialize UI components (but don't fail if they don't work)
            try {
                // Initialize UI Manager
                console.log('üéõÔ∏è Attempting to initialize UI Manager...');
                if (typeof AgentOSUIManager !== 'undefined') {
                    uiManager = new AgentOSUIManager();
                    console.log('‚úÖ UI Manager initialized');
                    
                    // Initialize data table
                    console.log('üìã Initializing data table...');
                    initializeDataTable();
                    
                                         // Start real-time updates
                     console.log('üîÑ Starting real-time updates...');
                     startRealTimeUpdates();
                     
                     // Start enhanced real-time updates
                     console.log('üîÑ Starting enhanced real-time updates...');
                     startEnhancedRealTimeUpdates();
                    
                    // Add event listeners
                    console.log('üéß Setting up event listeners...');
                    setupEventListeners();
                    
                    // Show welcome notification
                    setTimeout(() => {
                        if (uiManager && uiManager.showNotification) {
                            uiManager.showNotification('success', 'Dashboard Ready', 'Agent-OS Enhanced Dashboard is now fully operational!', {
                                duration: 4000
                            });
                        }
                    }, 1000);
                } else {
                    console.warn('‚ö†Ô∏è AgentOSUIManager not available, continuing without UI components');
                }
                
                // Try to initialize theme manager
                console.log('üé® Attempting to initialize theme manager...');
                if (typeof AgentOSThemeManager !== 'undefined') {
                    const themeManager = window.agentOSThemeManager || new AgentOSThemeManager();
                    themeManager.initThemeToggle();
                    console.log('‚úÖ Theme manager initialized');
                } else {
                    console.warn('‚ö†Ô∏è AgentOSThemeManager not available');
                }
                
            } catch (error) {
                console.error('‚ùå Error during UI component initialization:', error);
                console.error('Error stack:', error.stack);
                console.log('üîÑ Continuing with charts only...');
            }
            
            console.log('‚úÖ Dashboard initialization complete');
        }
        
        function initializeChartsOnly() {
            console.log('üìä Initializing charts only (fallback mode)...');
            
            try {
                // Initialize Chart.js charts
                console.log('üìä Initializing Chart.js charts...');
                initializeBarChart();
                initializeLineChart();
                
                console.log('‚úÖ Charts-only initialization complete');
                
            } catch (error) {
                console.error('‚ùå Error during charts-only initialization:', error);
                console.error('Error stack:', error.stack);
            }
        }
        
        // Chart.js chart instances (lineChart is declared here, barChart is declared above)
        let lineChart;
        
        function initializeBarChart() {
            console.log('üîç Looking for bar chart canvas...');
            const canvas = document.getElementById('bar-chart');
            
            if (!canvas) {
                console.error('‚ùå Bar chart canvas not found');
                return;
            }
            
            if (typeof Chart === 'undefined') {
                console.error('‚ùå Chart.js not available for bar chart');
                return;
            }
            
            console.log('‚úÖ Bar chart canvas found:', canvas);
            
            try {
                console.log('Initializing Chart.js Bar Chart');
                
                const ctx = canvas.getContext('2d');
                barChart = new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: ['CPU', 'Memory', 'Network', 'Disk', 'Processes'],
                        datasets: [{
                            label: 'System Performance',
                            data: [75, 68, 32, 45, 23],
                            backgroundColor: [
                                'rgba(255, 99, 132, 0.8)',
                                'rgba(54, 162, 235, 0.8)',
                                'rgba(255, 205, 86, 0.8)',
                                'rgba(75, 192, 192, 0.8)',
                                'rgba(153, 102, 255, 0.8)'
                            ],
                            borderColor: [
                                'rgba(255, 99, 132, 1)',
                                'rgba(54, 162, 235, 1)',
                                'rgba(255, 205, 86, 1)',
                                'rgba(75, 192, 192, 1)',
                                'rgba(153, 102, 255, 1)'
                            ],
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'top',
                            },
                            title: {
                                display: true,
                                text: 'System Performance Metrics'
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                max: 100
                            }
                        },
                        onClick: (event, elements) => {
                            if (elements.length > 0) {
                                const index = elements[0].index;
                                const label = barChart.data.labels[index];
                                const value = barChart.data.datasets[0].data[index];
                                uiManager.showNotification('info', 'Bar Selected', `${label} - ${value}%`);
                            }
                        }
                    }
                });
                
                console.log('‚úÖ Chart.js Bar Chart initialized successfully');
                
            } catch (error) {
                console.error('Error initializing bar chart:', error);
            }
        }
        
        function initializeLineChart() {
            console.log('üîç Looking for line chart canvas...');
            const canvas = document.getElementById('line-chart');
            
            if (!canvas) {
                console.error('‚ùå Line chart canvas not found');
                return;
            }
            
            if (typeof Chart === 'undefined') {
                console.error('‚ùå Chart.js not available for line chart');
                return;
            }
            
            console.log('‚úÖ Line chart canvas found:', canvas);
            
            try {
                console.log('Initializing Chart.js Line Chart');
                
                const ctx = canvas.getContext('2d');
                lineChart = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: ['00:00', '04:00', '08:00', '12:00', '16:00', '20:00'],
                        datasets: [{
                            label: 'CPU Usage',
                            data: [45, 52, 78, 85, 72, 68],
                            borderColor: 'rgba(255, 99, 132, 1)',
                            backgroundColor: 'rgba(255, 99, 132, 0.1)',
                            fill: true,
                            tension: 0.4
                        }, {
                            label: 'Memory Usage',
                            data: [60, 65, 72, 78, 75, 70],
                            borderColor: 'rgba(54, 162, 235, 1)',
                            backgroundColor: 'rgba(54, 162, 235, 0.1)',
                            fill: true,
                            tension: 0.4
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'top',
                            },
                            title: {
                                display: true,
                                text: 'System Analysis Overview'
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                max: 100
                            }
                        },
                        onClick: (event, elements) => {
                            if (elements.length > 0) {
                                const index = elements[0].index;
                                const label = lineChart.data.labels[index];
                                const datasetIndex = elements[0].datasetIndex;
                                const datasetLabel = lineChart.data.datasets[datasetIndex].label;
                                const value = lineChart.data.datasets[datasetIndex].data[index];
                                uiManager.showNotification('info', 'Point Selected', `${datasetLabel} at ${label} - ${value}%`);
                            }
                        }
                    }
                });
                
                console.log('‚úÖ Chart.js Line Chart initialized successfully');
                
            } catch (error) {
                console.error('Error initializing line chart:', error);
            }
        }
        
        function initializeDataTable() {
            const container = document.getElementById('system-events-table');
            if (!container) {
                console.error('Data table container not found');
                return;
            }
            
            try {
                // Sample system events data
                const systemEventsData = [
                    { id: 1, timestamp: '2024-01-15 10:30:15', level: 'INFO', component: 'Dashboard', message: 'Dashboard initialized successfully', status: 'Active' },
                    { id: 2, timestamp: '2024-01-15 10:29:45', level: 'WARNING', component: 'Memory', message: 'Memory usage approaching threshold', status: 'Warning' },
                    { id: 3, timestamp: '2024-01-15 10:28:30', level: 'ERROR', component: 'Network', message: 'Connection timeout to external service', status: 'Error' },
                    { id: 4, timestamp: '2024-01-15 10:27:15', level: 'INFO', component: 'CPU', message: 'CPU usage normalized', status: 'Active' },
                    { id: 5, timestamp: '2024-01-15 10:26:00', level: 'SUCCESS', component: 'Backup', message: 'System backup completed', status: 'Success' },
                    { id: 6, timestamp: '2024-01-15 10:25:30', level: 'INFO', component: 'Security', message: 'Security scan completed', status: 'Active' },
                    { id: 7, timestamp: '2024-01-15 10:24:45', level: 'WARNING', component: 'Disk', message: 'Disk space running low', status: 'Warning' },
                    { id: 8, timestamp: '2024-01-15 10:23:20', level: 'INFO', component: 'Database', message: 'Database connection established', status: 'Active' }
                ];
                
                systemEventsTable = uiManager.createDataTable('system-events-table', {
                    columns: [
                        { key: 'id', label: 'ID', sortable: true, width: '60px' },
                        { key: 'timestamp', label: 'Timestamp', sortable: true, width: '150px' },
                        { key: 'level', label: 'Level', sortable: true, width: '100px' },
                        { key: 'component', label: 'Component', sortable: true, width: '120px' },
                        { key: 'message', label: 'Message', sortable: false, width: 'auto' },
                        { key: 'status', label: 'Status', sortable: true, width: '100px' }
                    ],
                    data: systemEventsData,
                    pageSize: 5,
                    sortable: true,
                    searchable: true,
                    selectable: true
                });
                
                console.log('‚úÖ Data table initialized successfully');
                
            } catch (error) {
                console.error('Error initializing data table:', error);
                console.error('Error details:', error.stack);
            }
        }
        
        function startRealTimeUpdates() {
            // Update metrics every 5 seconds
            setInterval(() => {
                updateMetrics();
            }, 5000);
            
            // Update data table every 10 seconds
            setInterval(() => {
                updateDataTable();
            }, 10000);
        }
        
        function updateMetrics() {
            // Simulate real-time metric updates
            const metrics = window.AgentOSDatasets?.realtimeMetrics?.systemHealth;
            if (metrics) {
                document.getElementById('cpu-usage').textContent = metrics.cpu.current + '%';
                document.getElementById('memory-usage').textContent = metrics.memory.current + '%';
                document.getElementById('network-usage').textContent = metrics.network.current + '%';
                document.getElementById('disk-usage').textContent = metrics.disk.current + '%';
                
                // Update progress bars
                updateProgressBars();
            }
        }
        
        function updateDataTable() {
            if (systemEventsTable) {
                // Add a new event to the table
                const newEvent = {
                    id: Date.now(),
                    timestamp: new Date().toLocaleString(),
                    level: ['INFO', 'WARNING', 'ERROR', 'SUCCESS'][Math.floor(Math.random() * 4)],
                    component: ['Dashboard', 'Memory', 'Network', 'CPU', 'Security', 'Database'][Math.floor(Math.random() * 6)],
                    message: 'Real-time system event update',
                    status: 'Active'
                };
                
                const currentData = systemEventsTable.getData();
                currentData.unshift(newEvent);
                
                // Keep only last 20 events
                if (currentData.length > 20) {
                    currentData.splice(20);
                }
                
                systemEventsTable.setData(currentData);
            }
        }
        
        function updateProgressBars() {
            const progressBars = document.querySelectorAll('.progress-bar');
            progressBars.forEach(bar => {
                const width = bar.style.width;
                const targetWidth = parseInt(width) + (Math.random() - 0.5) * 10;
                const newWidth = Math.max(0, Math.min(100, targetWidth));
                bar.style.width = newWidth + '%';
            });
        }
        
        function setupEventListeners() {
            // Chart control event listeners
            document.addEventListener('click', function(event) {
                if (event.target.classList.contains('chart-card-action')) {
                    event.preventDefault();
                }
            });
        }
        
        // Chart control functions
        function setCameraPreset(chartId, preset) {
            if (chartId === 'bar-chart' && barChart) {
                barChart.setCameraPreset(preset);
            } else if (chartId === 'scatter-chart' && scatterChart) {
                scatterChart.setCameraPreset(preset);
            }
        }
        
        function resetCamera(chartId) {
            if (chartId === 'bar-chart' && barChart) {
                barChart.resetCamera();
            } else if (chartId === 'scatter-chart' && scatterChart) {
                scatterChart.resetCamera();
            }
        }
        
        function exportChart(chartId) {
            if (chartId === 'bar-chart' && barChart) {
                const dataUrl = barChart.exportAsImage();
                const link = document.createElement('a');
                link.download = 'agent-os-bar-chart.png';
                link.href = dataUrl;
                link.click();
                uiManager.showNotification('success', 'Export Complete', 'Bar chart exported successfully');
            } else if (chartId === 'scatter-chart' && scatterChart) {
                const dataUrl = scatterChart.exportAsImage();
                const link = document.createElement('a');
                link.download = 'agent-os-scatter-chart.png';
                link.href = dataUrl;
                link.click();
                uiManager.showNotification('success', 'Export Complete', 'Scatter chart exported successfully');
            }
        }
        
        function setAnimationSpeed(chartId, speed) {
            // This would be implemented in the chart classes
            console.log(`Setting animation speed for ${chartId}: ${speed}`);
        }
        
        function setPointSize(chartId, size) {
            // This would be implemented in the scatter chart
            console.log(`Setting point size for ${chartId}: ${size}`);
        }
        
        // Data table functions
        function refreshDataTable() {
            if (systemEventsTable) {
                systemEventsTable.setLoading(true);
                setTimeout(() => {
                    updateDataTable();
                    systemEventsTable.setLoading(false);
                    uiManager.showNotification('success', 'Data Refreshed', 'System events table updated');
                }, 1000);
            }
        }
        
        function exportDataTable() {
            if (systemEventsTable) {
                const selectedRows = systemEventsTable.getSelectedRows();
                const data = selectedRows.length > 0 ? selectedRows : systemEventsTable.getData();
                
                const csvContent = 'data:text/csv;charset=utf-8,' + 
                    'ID,Timestamp,Level,Component,Message,Status\n' +
                    data.map(row => `${row.id},"${row.timestamp}","${row.level}","${row.component}","${row.message}","${row.status}"`).join('\n');
                
                const link = document.createElement('a');
                link.download = 'system-events.csv';
                link.href = encodeURI(csvContent);
                link.click();
                
                uiManager.showNotification('success', 'Export Complete', `${data.length} events exported to CSV`);
            }
        }
        
        // Chart.js utility functions
        function updateBarChart() {
            if (barChart) {
                const newData = barChart.data.datasets[0].data.map(() => 
                    Math.floor(Math.random() * 100)
                );
                barChart.data.datasets[0].data = newData;
                barChart.update();
                uiManager.showNotification('success', 'Bar Chart Updated', 'Performance metrics refreshed');
            }
        }
        
        function updateLineChart() {
            if (lineChart) {
                const timeLabels = lineChart.data.labels;
                const newTime = new Date().toLocaleTimeString('en-US', { 
                    hour12: false, 
                    hour: '2-digit', 
                    minute: '2-digit' 
                });
                
                if (timeLabels.length > 10) {
                    timeLabels.shift();
                    lineChart.data.datasets.forEach(dataset => dataset.data.shift());
                }
                
                timeLabels.push(newTime);
                lineChart.data.datasets[0].data.push(Math.floor(Math.random() * 100));
                lineChart.data.datasets[1].data.push(Math.floor(Math.random() * 100));
                lineChart.update('none');
                uiManager.showNotification('success', 'Line Chart Updated', 'Real-time data updated');
            }
        }
        
        function changeBarChartType(type) {
            if (barChart) {
                barChart.config.type = type;
                barChart.update();
                uiManager.showNotification('info', 'Chart Type Changed', `Switched to ${type} chart`);
            }
        }
        
        function changeLineChartType(type) {
            if (lineChart) {
                lineChart.config.type = type;
                lineChart.update();
                uiManager.showNotification('info', 'Chart Type Changed', `Switched to ${type} chart`);
            }
        }
        
        function resetBarChart() {
            if (barChart) {
                barChart.data.datasets[0].data = [75, 68, 32, 45, 23];
                barChart.update();
                uiManager.showNotification('info', 'Bar Chart Reset', 'Chart data reset to default values');
            }
        }
        
        function resetLineChart() {
            if (lineChart) {
                lineChart.data.labels = ['00:00', '04:00', '08:00', '12:00', '16:00', '20:00'];
                lineChart.data.datasets[0].data = [45, 52, 78, 85, 72, 68];
                lineChart.data.datasets[1].data = [60, 65, 72, 78, 75, 70];
                lineChart.update();
                uiManager.showNotification('info', 'Line Chart Reset', 'Chart data reset to default values');
            }
        }
        
        function setAnimationSpeed(chartId, speed) {
            const chart = chartId === 'bar-chart' ? barChart : lineChart;
            if (chart) {
                chart.options.animation.duration = speed * 1000;
                uiManager.showNotification('info', 'Animation Speed Updated', `Speed set to ${speed}x`);
            }
        }
        
        function exportChart(chartId) {
            const chart = chartId === 'bar-chart' ? barChart : lineChart;
            if (chart) {
                const link = document.createElement('a');
                link.download = `${chartId}.png`;
                link.href = chart.toBase64Image();
                link.click();
                uiManager.showNotification('success', 'Chart Exported', `${chartId} exported successfully`);
            }
        }
        
        // Utility functions
        function refreshMetrics() {
            updateMetrics();
            uiManager.showNotification('success', 'Metrics Refreshed', 'System metrics updated');
        }
        
        function toggleAnalytics() {
            const analyticsGrid = document.querySelector('.analytics-grid');
            if (analyticsGrid) {
                analyticsGrid.style.display = analyticsGrid.style.display === 'none' ? 'grid' : 'none';
            }
        }
        
        // Enhanced Data Functions
        function refreshLessonsLearned() {
            console.log('Refreshing lessons learned...');
            // Simulate loading real lessons learned data
            const lessons = [
                {
                    type: 'critical',
                    date: '2025-01-27',
                    title: 'Deployment Fixes & Alpine Linux Dependencies',
                    summary: 'Alpine Linux requires libstdc++ and libgomp for ONNX/TensorFlow - add to Dockerfile',
                    status: 'applied'
                },
                {
                    type: 'warning',
                    date: '2025-01-27',
                    title: 'PowerShell Command Chaining',
                    summary: 'PowerShell doesn\'t support && operator - use semicolons or separate commands',
                    status: 'pending'
                },
                {
                    type: 'info',
                    date: '2025-01-27',
                    title: 'Test-Driven Database Development',
                    summary: 'Write entity tests first, then repository tests, then migration scripts',
                    status: 'applied'
                }
            ];
            
            updateLessonsLearnedDisplay(lessons);
            uiManager.showNotification('success', 'Lessons Learned Updated', 'Recent lessons refreshed');
        }
        
        function updateLessonsLearnedDisplay(lessons) {
            const container = document.getElementById('lessons-learned-container');
            if (!container) return;
            
            container.innerHTML = lessons.map(lesson => `
                <div class="lesson-item">
                    <div class="lesson-header">
                        <span class="lesson-type ${lesson.type}">${getLessonTypeIcon(lesson.type)} ${lesson.type.charAt(0).toUpperCase() + lesson.type.slice(1)}</span>
                        <span class="lesson-date">${lesson.date}</span>
                    </div>
                    <div class="lesson-title">${lesson.title}</div>
                    <div class="lesson-summary">${lesson.summary}</div>
                    <div class="lesson-status ${lesson.status}">${lesson.status.charAt(0).toUpperCase() + lesson.status.slice(1)}</div>
                </div>
            `).join('');
        }
        
        function getLessonTypeIcon(type) {
            const icons = {
                critical: 'üö®',
                warning: '‚ö†Ô∏è',
                info: '‚ÑπÔ∏è'
            };
            return icons[type] || '‚ÑπÔ∏è';
        }
        
        function exportLessonsLearned() {
            uiManager.showNotification('info', 'Export Started', 'Lessons learned export in progress...');
            setTimeout(() => {
                uiManager.showNotification('success', 'Export Complete', 'Lessons learned exported to CSV');
            }, 2000);
        }
        
        function refreshComplianceMetrics() {
            console.log('Refreshing compliance metrics...');
            // Simulate loading real compliance data
            const complianceData = {
                complianceScore: 100,
                criticalViolations: 0,
                filesProcessed: 152,
                processingEfficiency: 85
            };
            
            updateComplianceMetricsDisplay(complianceData);
            uiManager.showNotification('success', 'Compliance Updated', 'Live compliance metrics refreshed');
        }
        
        function updateComplianceMetricsDisplay(data) {
            document.getElementById('compliance-score').textContent = data.complianceScore + '%';
            document.getElementById('critical-violations').textContent = data.criticalViolations;
            document.getElementById('files-processed').textContent = data.filesProcessed;
            document.getElementById('processing-efficiency').textContent = data.processingEfficiency + '%';
        }
        
        // Cache Performance Functions
        function refreshCacheMetrics() {
            console.log('Refreshing cache metrics...');
            // Simulate loading real cache performance data
            const cacheData = {
                hitRate: 92.5,
                missRate: 7.5,
                cacheSize: '256MB',
                evictions: 12,
                avgResponseTime: '45ms',
                efficiency: 94.2
            };
            
            updateCacheMetricsDisplay(cacheData);
            uiManager.showNotification('success', 'Cache Metrics Updated', 'Cache performance refreshed');
        }
        
        function updateCacheMetricsDisplay(data) {
            document.getElementById('cache-hit-rate').textContent = data.hitRate + '%';
            document.getElementById('cache-miss-rate').textContent = data.missRate + '%';
            document.getElementById('cache-size').textContent = data.cacheSize;
            document.getElementById('cache-evictions').textContent = data.evictions;
            document.getElementById('avg-cache-response').textContent = data.avgResponseTime;
            document.getElementById('cache-efficiency').textContent = data.efficiency + '%';
        }
        
        // AI Processing Functions
        function refreshAIProcessingMetrics() {
            console.log('Refreshing AI processing metrics...');
            // Simulate loading real AI processing data
            const aiData = {
                requestsPerSec: 15.3,
                avgResponseTime: '125ms',
                cacheHitRate: 78.4,
                modelLoadingTime: '2.1s',
                memoryUsage: '1.2GB',
                gpuUtilization: 45
            };
            
            updateAIProcessingMetricsDisplay(aiData);
            uiManager.showNotification('success', 'AI Metrics Updated', 'AI processing analytics refreshed');
        }
        
        function updateAIProcessingMetricsDisplay(data) {
            document.getElementById('ai-requests-per-sec').textContent = data.requestsPerSec;
            document.getElementById('avg-ai-response').textContent = data.avgResponseTime;
            document.getElementById('ai-cache-hit-rate').textContent = data.cacheHitRate + '%';
            document.getElementById('model-loading-time').textContent = data.modelLoadingTime;
            document.getElementById('ai-memory-usage').textContent = data.memoryUsage;
            document.getElementById('gpu-utilization').textContent = data.gpuUtilization + '%';
        }
        
        // Database Performance Functions
        function refreshDatabaseMetrics() {
            console.log('Refreshing database metrics...');
            // Simulate loading real database performance data
            const dbData = {
                queryResponseTime: '23ms',
                connectionPoolUsage: 67,
                activeConnections: '8/12',
                slowQueries: 3,
                indexHitRate: 96.8,
                databaseSize: '2.4GB'
            };
            
            updateDatabaseMetricsDisplay(dbData);
            uiManager.showNotification('success', 'Database Metrics Updated', 'Database performance refreshed');
        }
        
        function updateDatabaseMetricsDisplay(data) {
            document.getElementById('query-response-time').textContent = data.queryResponseTime;
            document.getElementById('connection-pool-usage').textContent = data.connectionPoolUsage + '%';
            document.getElementById('active-connections').textContent = data.activeConnections;
            document.getElementById('slow-queries').textContent = data.slowQueries;
            document.getElementById('index-hit-rate').textContent = data.indexHitRate + '%';
            document.getElementById('database-size').textContent = data.databaseSize;
        }
        
        // Storage Analytics Functions
        function refreshStorageMetrics() {
            console.log('Refreshing storage metrics...');
            // Simulate loading real storage analytics data
            const storageData = {
                diskUsage: 34.2,
                availableSpace: '156GB',
                ioOperations: '1,247',
                readSpeed: '245MB/s',
                writeSpeed: '189MB/s',
                storageEfficiency: 87.3
            };
            
            updateStorageMetricsDisplay(storageData);
            uiManager.showNotification('success', 'Storage Metrics Updated', 'Storage analytics refreshed');
        }
        
        function updateStorageMetricsDisplay(data) {
            document.getElementById('disk-usage').textContent = data.diskUsage + '%';
            document.getElementById('available-space').textContent = data.availableSpace;
            document.getElementById('io-operations').textContent = data.ioOperations;
            document.getElementById('read-speed').textContent = data.readSpeed;
            document.getElementById('write-speed').textContent = data.writeSpeed;
            document.getElementById('storage-efficiency').textContent = data.storageEfficiency + '%';
        }
        
        function runSystemDiagnostics() {
            console.log('Running system diagnostics...');
            uiManager.showNotification('info', 'Diagnostics Started', 'System health check in progress...');
            
            setTimeout(() => {
                // Simulate diagnostic results
                const diagnostics = {
                    platform: 'Windows 10',
                    nodeVersion: 'v22.16.0',
                    dependencies: 'All Present',
                    repository: 'Complete'
                };
                
                updateSystemHealthDisplay(diagnostics);
                uiManager.showNotification('success', 'Diagnostics Complete', 'System health check completed');
            }, 3000);
        }
        
        function updateSystemHealthDisplay(data) {
            document.getElementById('platform-info').textContent = data.platform;
            document.getElementById('node-version').textContent = data.nodeVersion;
            document.getElementById('dependencies-status').textContent = data.dependencies;
            document.getElementById('repo-status').textContent = data.repository;
        }
        
        function refreshPerformanceMetrics() {
            console.log('Refreshing performance metrics...');
            // Simulate loading real performance data
            const performanceData = {
                uptime: '15 days',
                totalRequests: 57,
                avgProcessingTime: '150ms',
                memoryUsage: '45%'
            };
            
            updatePerformanceMetricsDisplay(performanceData);
            uiManager.showNotification('success', 'Performance Updated', 'Development performance refreshed');
        }
        
        function updatePerformanceMetricsDisplay(data) {
            document.getElementById('uptime-value').textContent = data.uptime;
            document.getElementById('total-requests').textContent = data.totalRequests;
            document.getElementById('avg-processing-time').textContent = data.avgProcessingTime;
            document.getElementById('memory-usage-perf').textContent = data.memoryUsage;
        }
        
        function refreshProjectStatus() {
            console.log('Refreshing project status...');
            // Simulate loading real project data
            const projectData = {
                phase1: { status: 'completed', progress: 100 },
                phase2: { status: 'in-progress', progress: 75 },
                phase3: { status: 'pending', progress: 25 }
            };
            
            updateProjectStatusDisplay(projectData);
            uiManager.showNotification('success', 'Project Status Updated', 'Project progress refreshed');
        }
        
        function updateProjectStatusDisplay(data) {
            // Update phase progress bars
            const phaseItems = document.querySelectorAll('.phase-item');
            phaseItems.forEach((item, index) => {
                const progressBar = item.querySelector('.progress-bar');
                const statusElement = item.querySelector('.phase-status');
                
                if (index === 0 && data.phase1) {
                    progressBar.style.width = data.phase1.progress + '%';
                    statusElement.className = `phase-status ${data.phase1.status}`;
                } else if (index === 1 && data.phase2) {
                    progressBar.style.width = data.phase2.progress + '%';
                    statusElement.className = `phase-status ${data.phase2.status}`;
                } else if (index === 2 && data.phase3) {
                    progressBar.style.width = data.phase3.progress + '%';
                    statusElement.className = `phase-status ${data.phase3.status}`;
                }
            });
        }
        
        function refreshVelocityMetrics() {
            console.log('Refreshing velocity metrics...');
            // Simulate loading real velocity data
            const velocityData = {
                tasksCompleted: 12,
                avgTaskTime: '45min',
                codeQuality: 92,
                testCoverage: 87
            };
            
            updateVelocityMetricsDisplay(velocityData);
            uiManager.showNotification('success', 'Velocity Updated', 'Development velocity refreshed');
        }
        
        function updateVelocityMetricsDisplay(data) {
            document.getElementById('tasks-completed').textContent = data.tasksCompleted;
            document.getElementById('avg-task-time').textContent = data.avgTaskTime;
            document.getElementById('code-quality').textContent = data.codeQuality + '%';
            document.getElementById('test-coverage').textContent = data.testCoverage + '%';
        }
        
        // Enhanced real-time updates
        function startEnhancedRealTimeUpdates() {
            // Update lessons learned every 30 seconds
            setInterval(() => {
                refreshLessonsLearned();
            }, 30000);
            
            // Update compliance metrics every 15 seconds
            setInterval(() => {
                refreshComplianceMetrics();
            }, 15000);
            
            // Update cache metrics every 10 seconds
            setInterval(() => {
                refreshCacheMetrics();
            }, 10000);
            
            // Update AI processing metrics every 12 seconds
            setInterval(() => {
                refreshAIProcessingMetrics();
            }, 12000);
            
            // Update database metrics every 8 seconds
            setInterval(() => {
                refreshDatabaseMetrics();
            }, 8000);
            
            // Update storage metrics every 20 seconds
            setInterval(() => {
                refreshStorageMetrics();
            }, 20000);
            
            // Update performance metrics every 20 seconds
            setInterval(() => {
                refreshPerformanceMetrics();
            }, 20000);
            
            // Update project status every 60 seconds
            setInterval(() => {
                refreshProjectStatus();
            }, 60000);
            
            // Update velocity metrics every 45 seconds
            setInterval(() => {
                refreshVelocityMetrics();
            }, 45000);
        }
        
        function showSystemInfo() {
            uiManager.showModal({
                type: 'info',
                title: 'System Information',
                message: 'Agent-OS Enhanced Dashboard v2.0\n\nFeatures:\n‚Ä¢ Chart.js Interactive Charts\n‚Ä¢ Real-time Metrics\n‚Ä¢ Advanced UI Components\n‚Ä¢ Responsive Design\n‚Ä¢ Accessibility Support\n‚Ä¢ Mobile Optimized',
                buttons: [
                    { text: 'Close', type: 'primary' }
                ]
            });
        }
        
        function exportDashboard() {
            uiManager.showNotification('info', 'Export Started', 'Dashboard export in progress...');
            setTimeout(() => {
                uiManager.showNotification('success', 'Export Complete', 'Dashboard data exported successfully');
            }, 2000);
        }
        
        function showSettings() {
            uiManager.showModal({
                type: 'form',
                title: 'Dashboard Settings',
                formConfig: {
                    fields: [
                        { name: 'theme', label: 'Theme', type: 'select', options: ['light', 'dark', 'system'], value: 'dark' },
                        { name: 'refreshInterval', label: 'Refresh Interval (seconds)', type: 'number', value: 5, min: 1, max: 60 },
                        { name: 'animations', label: 'Enable Animations', type: 'checkbox', value: true },
                        { name: 'notifications', label: 'Show Notifications', type: 'checkbox', value: true }
                    ]
                },
                buttons: [
                    { text: 'Save', type: 'primary', action: 'save' },
                    { text: 'Cancel', type: 'secondary', action: 'cancel' }
                ]
            });
        }
        
        function showHelp() {
            uiManager.showModal({
                type: 'info',
                title: 'Dashboard Help',
                message: 'Keyboard Shortcuts:\n‚Ä¢ Ctrl+K: Global Search\n‚Ä¢ Ctrl+T: Toggle Theme\n‚Ä¢ Ctrl+M: Quick Actions\n‚Ä¢ Escape: Close Modals\n\nFeatures:\n‚Ä¢ Interactive Chart.js Charts\n‚Ä¢ Real-time System Monitoring\n‚Ä¢ Advanced Data Tables\n‚Ä¢ Notification System\n‚Ä¢ Modal Dialogs\n‚Ä¢ Mobile Responsive',
                buttons: [
                    { text: 'Got it!', type: 'primary' }
                ]
            });
        }
        
        function showNotifications() {
            uiManager.showTestNotifications();
        }
        
        function showDataTable() {
            uiManager.showModal({
                type: 'custom',
                title: 'System Events Data Table',
                customContent: '<div id="modal-data-table"></div>',
                buttons: [
                    { text: 'Close', type: 'secondary' }
                ]
            });
            
            // Initialize data table in modal
            setTimeout(() => {
                const modalContainer = document.getElementById('modal-data-table');
                if (modalContainer) {
                    uiManager.createDataTable('modal-data-table', {
                        columns: [
                            { key: 'id', label: 'ID', sortable: true },
                            { key: 'timestamp', label: 'Timestamp', sortable: true },
                            { key: 'level', label: 'Level', sortable: true },
                            { key: 'component', label: 'Component', sortable: true },
                            { key: 'message', label: 'Message', sortable: false },
                            { key: 'status', label: 'Status', sortable: true }
                        ],
                        data: systemEventsTable ? systemEventsTable.getData() : [],
                        pageSize: 10,
                        sortable: true,
                        searchable: true
                    });
                }
            }, 100);
        }
    </script>
</body>
</html>


